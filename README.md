

##  –û–ø–∏—Å
Social Feed API ‚Äî —Ü–µ backend-–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫, —è–∫–∏–π –º–æ–¥–µ–ª—é—î —Ä–æ–±–æ—Ç—É —Å–æ—Ü—ñ–∞–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ –∑ –≤–∏—Å–æ–∫–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º.  
–í—ñ–Ω —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤ —ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é, –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—é —Ç–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–æ—é —Å–∏—Å—Ç–µ–º–∏ –ø—Ä–∏ –≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤.  
–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏—Ö —Ä–æ–±–æ—Ç–∞—Ö –∑ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ ¬´–í–∏—Å–æ–∫–æ–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Å–∏—Å—Ç–µ–º–∏¬ª.

---

## Ô∏è –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ


-  **–°—Ç—Ä—ñ—á–∫–∞ –Ω–æ–≤–∏–Ω** (`/api/feed`) ‚Äî –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 20 –ø–æ—Å—Ç—ñ–≤ —ñ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏ —Ç–∞ –ª–∞–π–∫–∞–º–∏.
-  **–ü–æ–ø—É–ª—è—Ä–Ω—ñ –ø–æ—Å—Ç–∏** (`/api/trending`) ‚Äî —Ç–æ–ø-10 –ø–æ—Å—Ç—ñ–≤ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 24 –≥–æ–¥–∏–Ω–∏.
-  **–†–æ–±–æ—Ç–∞ –∑ –ø–æ—Å—Ç–∞–º–∏** ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –∫–æ–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è, –ª–∞–π–∫–∏.
- Ô∏è **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** ‚Äî health-check, –º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤.
-  **Chaos Mode** ‚Äî –≤–∏–ø–∞–¥–∫–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ.

---

##  –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
# /api/seed ‚Äì —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
# /api/feed ‚Äì —Å—Ç—Ä—ñ—á–∫–∞ –ø–æ—Å—Ç—ñ–≤
# /api/trending ‚Äì —Ç–æ–ø 10 –ø–æ—Å—Ç—ñ–≤
# CRUD –¥–ª—è –ø–æ—Å—Ç—ñ–≤, –ª–∞–π–∫—ñ–≤, –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
# —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
# /health ‚Äì —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
# /api/metrics ‚Äì –º–µ—Ç—Ä–∏–∫–∏
# /api/chaos ‚Äì —Ö–∞–æ—Å —Ä–µ–∂–∏–º


# –ú–æ–¥–µ–ª—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (JPA)
User.java
Post.java
Comment.java
Like.java
LikeId.java


# Spring Data JPA —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
UserRepository.java
PostRepository.java
CommentRepository.java
LikeRepository.java


DataSeederService.java  # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö

RequestResponseLoggingFilter.java # –õ–æ–≥—É–≤–∞–Ω–Ω—è HTTP –∑–∞–ø–∏—Ç—ñ–≤


LatencySimulator.java   # –Ü–º—ñ—Ç–∞—Ü—ñ—è –∑–∞—Ç—Ä–∏–º–æ–∫ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

SocialFeedApiApplication.java # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
```

---

##  –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è |
|------------|-------------|
| –ú–æ–≤–∞ | **Java 17** |
| –§—Ä–µ–π–º–≤–æ—Ä–∫ | **Spring Boot 3** |
| ORM | **Hibernate / JPA** |
| –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö | **PostgreSQL** |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è | **Docker** |
| –õ–æ–≥—É–≤–∞–Ω–Ω—è | **SLF4J + Custom Request Filter** |
| –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ | **Health Check, Metrics API** |
| Chaos Testing | **–í–∏–ø–∞–¥–∫–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ (10%)** |

---

## –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker


### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
```bash
docker-compose up --build
```

### –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É:
- API ‚Üí http://localhost:8080
- PostgreSQL ‚Üí localhost:5432  
  **user:** `postgres`  
  **password:** `postgres`  
  **database:** `socialfeed`

---

##  –°—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    followers_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    content TEXT NOT NULL,
    likes_count INTEGER DEFAULT 0,
    comments_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE comments (
    id SERIAL PRIMARY KEY,
    post_id INTEGER REFERENCES posts(id),
    user_id INTEGER REFERENCES users(id),
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE likes (
    user_id INTEGER REFERENCES users(id),
    post_id INTEGER REFERENCES posts(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (user_id, post_id)
);
```

---

##  –û—Å–Ω–æ–≤–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å |
|--------|-----------|------|
| `POST` | `/api/seed` | –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö |
| `GET` | `/api/feed?userId=1` | –°—Ç—Ä—ñ—á–∫–∞ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 20 –ø–æ—Å—Ç—ñ–≤ |
| `GET` | `/api/trending?userId=1` | –¢–æ–ø-10 –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏—Ö –ø–æ—Å—Ç—ñ–≤ |
| `GET` | `/api/users/{id}/posts` | –ü–æ—Å—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| `POST` | `/api/posts` | –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–æ—Å—Ç |
| `POST` | `/api/posts/{id}/like` | –õ–∞–π–∫ / –∞–Ω–ª–∞–π–∫ |
| `POST` | `/api/posts/{id}/comment` | –î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä |
| `GET` | `/api/metrics` | –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ |
| `GET` | `/health` | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–µ—Ä–≤–µ—Ä–∞ |
| `GET` | `/api/chaos/enable` | –í–∫–ª—é—á–∏—Ç–∏ —Ö–∞–æ—Å (10% –∑–±–æ—ó–≤) |

---

##  –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

###  –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
```bash
POST http://localhost:8080/api/seed
```
**Response:**
```
–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö –∑–∞–ø—É—â–µ–Ω–∞ —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ!
```

---

###  –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç—Ä—ñ—á–∫–∏ –Ω–æ–≤–∏–Ω
```bash
GET http://localhost:8080/api/feed?userId=1
```

**Response (—Å–∫–æ—Ä–æ—á–µ–Ω–æ):**
```json
[
  {
    "id": 101,
    "user": { "id": 2, "username": "user2" },
    "content": "–ü–æ—Å—Ç #101",
    "likesCount": 45,
    "commentsCount": 12,
    "createdAt": "2025-10-16T10:22:00",
    "likedByUser": true,
    "comments": [
      { "id": 22, "content": "–ö–æ–º–µ–Ω—Ç–∞—Ä #22", "user": { "id": 5, "username": "user5" } }
    ]
  }
]
```

---

### –¢—Ä–µ–Ω–¥–æ–≤—ñ –ø–æ—Å—Ç–∏
```bash
GET http://localhost:8080/api/trending?userId=1
```

**Response:**
```json
[
  {
    "id": 5001,
    "content": "–ü–æ—Å—Ç #5001",
    "likesCount": 1020,
    "commentsCount": 33,
    "likedByUser": false
  }
]
```

---

## –ú–µ—Ç—Ä–∏–∫–∏

–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ `/api/metrics`:
```json
{
  "total_requests": 10234,
  "requests_per_second": 42.5,
  "average_response_time": 78.2,
  "error_rate": 0.03,
  "active_connections": 12
}
```

---

## üß© Chaos Testing

**–í–º–∏–∫–∞–Ω–Ω—è —Ö–∞–æ—Å—É:**
```bash
GET http://localhost:8080/api/chaos/enable
```

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ 10% —É—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤ –≤–∏–ø–∞–¥–∫–æ–≤–æ –∑–∞–≤–µ—Ä—à—É–≤–∞—Ç–∏–º—É—Ç—å—Å—è –ø–æ–º–∏–ª–∫–æ—é `500 Internal Server Error`.

---

## –ê–≤—Ç–æ—Ä

**–ü–µ—Ç—Ä–æ–≤ –ê—Ä—Ç–µ–º**  
–°—Ç—É–¥–µ–Ω—Ç [–ü–ó-204]  


